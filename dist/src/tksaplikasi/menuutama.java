/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package tksaplikasi;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Calendar;
import java.util.GregorianCalendar;
import koneksi.koneksi;
/**
 *
 * @author asus
 */

public class menuutama extends javax.swing.JFrame {
private Connection conn = new koneksi().connect();
    String nama, user ;
    /**
     * Creates new form menuutama
     */
    public menuutama() {
        initComponents();
        ambildata();
        //setExtendedState(MAXIMIZED_BOTH); kalo mau full screen
        this.setLocationRelativeTo(null);
        new Thread() {
        public void run() {
            while(true) {
            Calendar kal = new GregorianCalendar();
            int tahun = kal.get(Calendar.YEAR);
            int bulan = kal.get(Calendar.MONTH)+1;
            int hari = kal.get(Calendar.DAY_OF_MONTH);
            int jam = kal.get(Calendar.HOUR_OF_DAY);
            int menit = kal.get(Calendar.MINUTE);
            int detik = kal.get(Calendar.SECOND);
            String tanggal = hari+" - "+bulan+" - "+tahun;
            String waktu1 = jam+" : "+menit+" : "+detik;
            String waktu2 = jam+" : "+menit+" : "+detik;
            jLabel1.setText(tanggal);
            jLabel2.setText(waktu1);
            }
        }    
        }.start();
    }
    
     protected void ambildata(){
        try {
        String sql = "SELECT * FROM login where status ='on'";
            java.sql.Statement stat = conn.createStatement();
            ResultSet hasil = stat.executeQuery(sql);
            while (hasil.next()){
                nama = hasil.getString("nama");
                user = hasil.getString("username");
            }
            lblnama.setText("Hello "+nama);
        }catch (SQLException e){
            
        }
    }
     
     protected void logout(){
        try {
        String sql1= "update login set status='off' where username='"+user+"'";
        PreparedStatement stat1 = conn.prepareStatement(sql1);
        stat1.executeUpdate();
        new formlogin().setVisible(true); 
        this.setVisible(false);
    } catch (SQLException e){
        
    }
    }
 

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        lblnama = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        jMenuBar1 = new javax.swing.JMenuBar();
        jMenu1 = new javax.swing.JMenu();
        menuuser = new javax.swing.JMenuItem();
        menulogout = new javax.swing.JMenuItem();
        jMenu2 = new javax.swing.JMenu();
        menumobil = new javax.swing.JMenuItem();
        menupegawai = new javax.swing.JMenuItem();
        jMenu3 = new javax.swing.JMenu();
        jMenuItem1 = new javax.swing.JMenuItem();
        menumobilkembali = new javax.swing.JMenuItem();
        menumobilkeluar = new javax.swing.JMenuItem();
        jMenu4 = new javax.swing.JMenu();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setBackground(new java.awt.Color(0, 0, 0));
        setPreferredSize(new java.awt.Dimension(800, 500));
        getContentPane().setLayout(null);

        jLabel1.setFont(new java.awt.Font("Tahoma", 1, 13)); // NOI18N
        jLabel1.setText("TANGGAL");
        getContentPane().add(jLabel1);
        jLabel1.setBounds(590, 50, 140, 16);

        jLabel2.setFont(new java.awt.Font("Tahoma", 1, 13)); // NOI18N
        jLabel2.setText("JAM");
        getContentPane().add(jLabel2);
        jLabel2.setBounds(590, 30, 130, 16);

        lblnama.setFont(new java.awt.Font("Tahoma", 1, 13)); // NOI18N
        lblnama.setText("NAMA");
        getContentPane().add(lblnama);
        lblnama.setBounds(590, 70, 210, 16);

        jLabel4.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabel4.setText("CV. TIRTA KARYA SEJAHTERA");
        getContentPane().add(jLabel4);
        jLabel4.setBounds(260, 250, 267, 38);

        jLabel3.setText("Jl. Harimau Jawa No.3, RT.3/RW.6, Munjul,Cipayung,Jakarta Timur,DKI Jakarta 13850");
        getContentPane().add(jLabel3);
        jLabel3.setBounds(160, 290, 510, 18);

        jLabel5.setIcon(new javax.swing.ImageIcon(getClass().getResource("/gambar/CV.TKS. (logo).png"))); // NOI18N
        getContentPane().add(jLabel5);
        jLabel5.setBounds(230, 100, 310, 210);

        jLabel6.setIcon(new javax.swing.ImageIcon(getClass().getResource("/gambar/BACKGROUND.png"))); // NOI18N
        getContentPane().add(jLabel6);
        jLabel6.setBounds(0, 0, 800, 450);

        jMenuBar1.setPreferredSize(new java.awt.Dimension(800, 50));
        jMenuBar1.setRequestFocusEnabled(false);

        jMenu1.setText("USER");
        jMenu1.setFont(new java.awt.Font("Arial", 1, 12)); // NOI18N
        jMenu1.setPreferredSize(new java.awt.Dimension(39, 30));
        jMenu1.setRequestFocusEnabled(false);
        jMenu1.setRolloverEnabled(false);

        menuuser.setFont(new java.awt.Font("Arial", 1, 12)); // NOI18N
        menuuser.setText("Data User");
        menuuser.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                menuuserActionPerformed(evt);
            }
        });
        jMenu1.add(menuuser);

        menulogout.setFont(new java.awt.Font("Arial", 1, 12)); // NOI18N
        menulogout.setText("Logout");
        menulogout.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                menulogoutActionPerformed(evt);
            }
        });
        jMenu1.add(menulogout);

        jMenuBar1.add(jMenu1);

        jMenu2.setText("MASTER");
        jMenu2.setFont(new java.awt.Font("Arial", 1, 12)); // NOI18N

        menumobil.setFont(new java.awt.Font("Arial", 1, 12)); // NOI18N
        menumobil.setText("Data Mobil");
        menumobil.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                menumobilActionPerformed(evt);
            }
        });
        jMenu2.add(menumobil);

        menupegawai.setFont(new java.awt.Font("Arial", 1, 12)); // NOI18N
        menupegawai.setText("Data Pegawai");
        menupegawai.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                menupegawaiActionPerformed(evt);
            }
        });
        jMenu2.add(menupegawai);

        jMenuBar1.add(jMenu2);

        jMenu3.setText("TRANSAKSI");
        jMenu3.setFont(new java.awt.Font("Arial", 1, 12)); // NOI18N

        jMenuItem1.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        jMenuItem1.setText("Transaksi Pelanggan");
        jMenuItem1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMenuItem1ActionPerformed(evt);
            }
        });
        jMenu3.add(jMenuItem1);

        menumobilkembali.setFont(new java.awt.Font("Arial", 1, 12)); // NOI18N
        menumobilkembali.setText("Mobil Keluar");
        menumobilkembali.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                menumobilkembaliActionPerformed(evt);
            }
        });
        jMenu3.add(menumobilkembali);

        menumobilkeluar.setFont(new java.awt.Font("Arial", 1, 12)); // NOI18N
        menumobilkeluar.setText("Mobil Kembali");
        menumobilkeluar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                menumobilkeluarActionPerformed(evt);
            }
        });
        jMenu3.add(menumobilkeluar);

        jMenuBar1.add(jMenu3);

        jMenu4.setText("LAPORAN");
        jMenu4.setFont(new java.awt.Font("Arial", 1, 12)); // NOI18N
        jMenu4.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jMenu4MouseClicked(evt);
            }
        });
        jMenu4.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMenu4ActionPerformed(evt);
            }
        });
        jMenuBar1.add(jMenu4);

        setJMenuBar(jMenuBar1);

        pack();
        setLocationRelativeTo(null);
    }// </editor-fold>//GEN-END:initComponents

    private void menuuserActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_menuuserActionPerformed
        // TODO add your handling code here:
        formuser frmU = new formuser();
        frmU.setVisible(true);
    }//GEN-LAST:event_menuuserActionPerformed

    private void menulogoutActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_menulogoutActionPerformed
        // TODO add your handling code here:
        logout();
    }//GEN-LAST:event_menulogoutActionPerformed

    private void menumobilActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_menumobilActionPerformed
        // TODO add your handling code here:
        formmobil frmM = new formmobil();
        frmM.setVisible(true);
    }//GEN-LAST:event_menumobilActionPerformed

    private void menupegawaiActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_menupegawaiActionPerformed
        // TODO add your handling code here:
        formdatapegawai frmP = new formdatapegawai();
        frmP.setVisible(true);
    }//GEN-LAST:event_menupegawaiActionPerformed

    private void jMenuItem1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMenuItem1ActionPerformed
        // TODO add your handling code here:
        formdatapelanggan frmS = new formdatapelanggan();
        frmS.setVisible(true);
    }//GEN-LAST:event_jMenuItem1ActionPerformed

    private void menumobilkeluarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_menumobilkeluarActionPerformed
        // TODO add your handling code here:
        formmobilkembali frmkeluar = new formmobilkembali();
        frmkeluar.setVisible(true);
    }//GEN-LAST:event_menumobilkeluarActionPerformed

    private void menumobilkembaliActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_menumobilkembaliActionPerformed
        // TODO add your handling code here:
        formmobilkeluar frmkembali = new formmobilkeluar();
        frmkembali.setVisible(true);
    }//GEN-LAST:event_menumobilkembaliActionPerformed

    private void jMenu4MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jMenu4MouseClicked
        // TODO add your handling code here:
        laporan lap = new laporan();
        lap.setVisible(true);
    }//GEN-LAST:event_jMenu4MouseClicked

    private void jMenu4ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMenu4ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jMenu4ActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(menuutama.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(menuutama.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(menuutama.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(menuutama.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new menuutama().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JMenu jMenu1;
    private javax.swing.JMenu jMenu2;
    private javax.swing.JMenu jMenu3;
    private javax.swing.JMenu jMenu4;
    private javax.swing.JMenuBar jMenuBar1;
    private javax.swing.JMenuItem jMenuItem1;
    private javax.swing.JLabel lblnama;
    private javax.swing.JMenuItem menulogout;
    private javax.swing.JMenuItem menumobil;
    private javax.swing.JMenuItem menumobilkeluar;
    private javax.swing.JMenuItem menumobilkembali;
    private javax.swing.JMenuItem menupegawai;
    private javax.swing.JMenuItem menuuser;
    // End of variables declaration//GEN-END:variables
}
